<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Social Engineering Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Rajdhani',sans-serif;background:#1a1d2e;color:#e8e9ed;line-height:1.6;min-height:100vh}
.container{width:100%;max-width:100%;padding:0}
#uploadArea{border:2px dashed #4a5568;border-radius:8px;padding:40px 20px;text-align:center;cursor:pointer;background:#2d3142;margin:20px;transition:all .3s}
#uploadArea:hover,#uploadArea.dragover{border-color:#5a8db8;background:rgba(90,141,184,.1)}
#uploadArea p{margin:10px 0}
#fileInput{display:none}
#fileInfo{color:#27ae60;margin:0 20px;font-weight:500}
#errorMsg{color:#e74c3c;margin:0 20px;font-weight:500}
.filter-section{background:#252837;padding:20px;display:none}
.filter-section.active{display:block}
.filter-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:15px}
.filter-group label{display:block;margin-bottom:8px;color:#a0a4b8;font-size:13px}
input[type=date],select{width:100%;padding:10px;background:#2d3142;border:1px solid #3d4152;border-radius:6px;color:#e8e9ed;font-family:'Rajdhani',sans-serif}
button{padding:10px 20px;background:#5a8db8;color:#fff;border:none;border-radius:6px;cursor:pointer;font-family:'Rajdhani',sans-serif;font-weight:600;transition:all .3s}
button:hover{background:#4a7da8;transform:translateY(-2px)}
#resetFiltersBtn{background:#e74c3c;width:100%;margin-top:10px}
#tableContainer{background:#1a1d2e;display:none}
#tableContainer.active{display:block}
.table-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch}
table{width:100%;border-collapse:collapse;font-size:11px;min-width:700px}
th{background:#252837;padding:12px 8px;text-align:left;font-weight:600;color:#a0a4b8;border-bottom:1px solid #3d4152;font-size:10px;text-transform:uppercase}
td{padding:10px 8px;border-bottom:1px solid #2d3142;color:#c5c7d0}
tr:hover{background:rgba(90,141,184,.05)}
.screenshot-thumb{width:35px;height:35px;object-fit:cover;border-radius:4px;cursor:pointer;background:#fff}
.pagination{display:flex;justify-content:center;align-items:center;gap:15px;padding:15px;background:#1a1d2e;flex-wrap:wrap}
.pagination button{padding:8px 16px;font-size:12px}
#pageInfo{color:#a0a4b8;font-size:12px}
.charts-grid{background:#1a1d2e;padding:15px}
.charts-row{display:grid;grid-template-columns:1fr;gap:15px;margin-bottom:15px}
.chart-card{background:#252837;border-radius:8px;padding:20px}
.chart-card h3{font-size:15px;margin-bottom:15px;color:#e8e9ed;font-weight:600}
.chart-container{position:relative;width:100%;height:250px}
canvas{max-width:100%!important;max-height:100%!important}
#imageModal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.9);justify-content:center;align-items:center}
#modalImage{max-width:90%;max-height:90%;border-radius:8px}
.close-modal{position:absolute;top:20px;right:30px;color:#fff;font-size:35px;cursor:pointer}
@media (min-width:768px){
.charts-row{grid-template-columns:1fr 1fr}
.chart-card{padding:25px}
.chart-card h3{font-size:16px}
.chart-container{height:280px}
table{font-size:12px}
th{font-size:11px;padding:14px 10px}
td{padding:12px 10px}
.screenshot-thumb{width:40px;height:40px}
}
@media (min-width:1024px){
.container{max-width:1400px;margin:0 auto}
.charts-grid{padding:35px}
.chart-container{height:300px}
table{font-size:13px}
}
</style>
</head>
<body>
<div class="container">

<div id="uploadArea">
<p style="font-size:18px">üìÇ Drag & Drop CSV/TSV file here</p>
<p style="color:#a0a4b8">or click to select</p>
</div>
<input type="file" id="fileInput" accept=".csv,.tsv,.txt">
<div id="fileInfo"></div>
<div id="errorMsg"></div>

<div class="filter-section" id="filterSection">
<div class="filter-grid">
<div class="filter-group">
<label>üìÖ Start Date</label>
<input type="date" id="dateStartFilter">
</div>
<div class="filter-group">
<label>üìÖ End Date</label>
<input type="date" id="dateEndFilter">
</div>
<div class="filter-group">
<label>üè¢ Sector</label>
<select id="sectorFilter">
<option value="">All Sectors</option>
</select>
</div>
<div class="filter-group">
<label>üéØ Goal</label>
<select id="goalFilter">
<option value="">All Goals</option>
</select>
</div>
</div>
<button id="resetFiltersBtn">üîÑ Reset Filters</button>
</div>

<div id="tableContainer">
<div class="table-wrapper">
<table>
<thead>
<tr>
<th>#</th>
<th>SITE</th>
<th>DATE</th>
<th>SECTOR</th>
<th>GOAL</th>
<th>SCREENSHOT</th>
</tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>
<div class="pagination">
<button id="prevBtn">‚Üê Previous</button>
<span id="pageInfo">Page 1</span>
<button id="nextBtn">Next ‚Üí</button>
</div>
</div>

<div class="charts-grid">
<div class="charts-row">
<div class="chart-card">
<h3>Distribuzione per Settore (Tutti)</h3>
<div class="chart-container">
<canvas id="allSectorsChart"></canvas>
</div>
</div>
<div class="chart-card">
<h3>Top 5 Settori Attaccati</h3>
<div class="chart-container">
<canvas id="top5SectorsBarChart"></canvas>
</div>
</div>
</div>

<div class="chart-card">
<h3>Distribuzione Obiettivi di Attacco (Tutti)</h3>
<div class="chart-container">
<canvas id="goalsPieChart"></canvas>
</div>
</div>

<div class="charts-row">
<div class="chart-card">
<h3>Attacchi per Mese</h3>
<div class="chart-container">
<canvas id="monthChart"></canvas>
</div>
</div>
<div class="chart-card">
<h3>Attacchi per Obiettivo nel Tempo</h3>
<div class="chart-container">
<canvas id="goalsByMonthChart"></canvas>
</div>
</div>
</div>
</div>

<div id="imageModal" onclick="closeModal()">
<span class="close-modal">&times;</span>
<img id="modalImage" src="" alt="Screenshot">
</div>

<script src="dashboard.js"></script>
</body>
</html>
